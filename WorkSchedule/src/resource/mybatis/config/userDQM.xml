<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="member">
	<!-- get메소드 호출 getID -> 네이밍 룰에 의해 id 소문자를 사용한다. -->

	<select id="selectlist" parameterType="model.domain.vo.MemberVO" resultType="model.domain.vo.MemberVO">
		SELECT ID, PWD, NAME, HIREDATE, SALARY, DEPT 
		FROM INCMEMBER
	</select>
		
	<select id="login" parameterType="model.domain.vo.MemberVO" resultType="model.domain.vo.MemberVO">
		SELECT * FROM INCMEMBER
		WHERE ID = #{id} AND PWD = #{pwd}	
	</select>	
	
	<insert id="insert" parameterType="model.domain.vo.MemberVO">
		INSERT INTO INCMEMBER
		VALUES ( #{id}, #{pwd}, #{name}, #{hiredate}, #{salary}, #{dept} )	
	</insert>
	
	<update id="update" parameterType="model.domain.vo.MemberVO">
		UPDATE INCMEMBER 
		SET ID=#{id}, PWD=#{pwd}, NAME=#{name}, HIREDATE=#{hiredate}, SALARY=#{salary}, DEPT=#{dept}
		WHERE ID=#{id}
	</update>	
		
	<delete id="delete" parameterType="model.domain.vo.MemberVO">
		DELETE FROM INCMEMBER WHERE ID=#{id}
	</delete>
		
		
	<!-- EMP 테이블 -->	
		
	<select id="selectemp" parameterType="model.domain.vo.EmployeeVO" resultType="model.domain.vo.EmployeeVO">
		SELECT *
		FROM EMPLOYEE A
		JOIN DEPARTMENT B USING (DEPTID)
		JOIN WORK C USING (EMPID) 
		WHERE EMPID = #{empid} 
	</select>

	<select id="loginemp" parameterType="model.domain.vo.EmployeeVO" resultType="model.domain.vo.EmployeeVO">
		SELECT * FROM EMPLOYEE
		WHERE EMPID = #{empid} AND EMPPWD = #{emppwd}	
	</select>


	<!-- ///////////////////////eunbi eunbi//////////////////////// -->
	 
	 <insert id="insertemp" parameterType="model.domain.vo.EmployeeDeptVO" >
	   
	   INSERT INTO EMPLOYEE
	  VALUES ( #{empid}, #{emppwd}, #{empname}, #{empgrade}, #{empphone}, #{empmail}, #{emploc}, 
	   (SELECT DEPTID
	     FROM DEPARTMENT
	     WHERE DEPTNAME = #{deptname}) )
	     
	 </insert>
	 
	 
	 <select id="pluslist" resultType="model.domain.vo.EmployeeDeptVO">
	   SELECT * 
	   FROM EMPLOYEE
	   JOIN DEPARTMENT USING (DEPTID)
	 </select>
	 
	 
	 <insert id="addFavorite" parameterType="model.domain.vo.FavoriteVO">
	  INSERT INTO FAVORITE
	  VALUES (#{empid}, #{empidfav})
	 </insert>
	  
	 <select id="selectdeptdiv" resultType="model.domain.vo.EmployeeDeptVO">
	   SELECT * 
	   FROM DEPARTMENT
	   JOIN DIVISION USING (DIVID)
	 </select>
	 
	<!-- ///////////////////////eunbi eunbi//////////////////////// --> 

	<select id="searchemp" parameterType="model.domain.vo.EmployeeDeptVO" resultType="model.domain.vo.EmployeeDeptVO">
	   SELECT * 
	   FROM EMPLOYEE
	   JOIN DEPARTMENT USING (DEPTID)
	   WHERE EMPNAME LIKE '%'||#{searchKeyword}||'%'
 	</select>
 
</mapper>































